<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Premium Service Estimator - MultiplyTalents</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <script>
        // GHL-specific configuration (injected by GHL)
        window.GHL_CONFIG = {
            webhookUrl: '{{custom.estimator_webhook_url}}',
            customFields: {
                selected_services: '{{contact.selected_services}}',
                business_scale: '{{contact.business_scale}}',
                service_level: '{{contact.service_level}}',
                industry_type: '{{contact.industry_type}}',
                estimated_investment: '{{contact.estimated_investment}}',
                bundle_discount: '{{contact.bundle_discount}}',
                final_quote_total: '{{contact.final_quote_total}}',
                project_description: '{{contact.project_description}}',
                video_walkthrough: '{{contact.video_walkthrough}}',
                full_quote_json: '{{contact.full_quote_json}}'
            }
        };
    </script>
</head>
<body>
    <div id="estimator-app">
        <div class="progress-section">
            <div class="progress-container">
                <div class="progress-steps" id="progress-steps">
                    <div class="progress-line"></div>
                    <div class="progress-line-active" id="progress-line-active"></div>
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="content-wrapper">
                <div class="estimator-layout">
                    
                    <div class="estimator-main">
                        <div class="estimator-card">
                            <div id="step-services" class="step-content active">
                                <div class="step-header">
                                    <h2>Select Your High-Impact Services</h2>
                                    <p>Choose the solutions that will move the needle for your business growth</p>
                                    <div class="context-indicator">
                                        <span>üìç</span>
                                        <span>Step 1 of 5: Selecting Services</span>
                                    </div>
                                </div>
                                <div class="step-body">
                                    <div class="help-banner">
                                        <span class="help-banner-icon">üèÜ</span>
                                        <div class="help-banner-content">
                                            <p><strong>Bundle & Save:</strong> Multi-service selections automatically trigger our agency partnership discounts.</p>
                                        </div>
                                    </div>
                                    <div class="services-grid" id="services-grid"></div>
                                </div>
                                <div class="step-footer">
                                    <button class="btn btn-ghost" disabled>‚Üê Back</button>
                                    <button id="services-continue" class="btn btn-primary" disabled>Continue to Scope ‚Üí</button>
                                </div>
                            </div>

                            <div id="step-scope" class="step-content">
                                <div class="step-header">
                                    <h2>Define Your Business Environment</h2>
                                    <p>We tailor our architecture based on your current scale and industry requirements</p>
                                    <div class="context-indicator">
                                        <span>üìç</span>
                                        <span>Step 2 of 5: Defining Scope</span>
                                    </div>
                                </div>
                                <div class="step-body" id="step-scope-body">
                                    </div>
                                <div class="step-footer">
                                    <button id="scope-back" class="btn btn-ghost">‚Üê Back to Services</button>
                                    <button id="scope-continue" class="btn btn-primary" disabled>Continue to Details ‚Üí</button>
                                </div>
                            </div>

                            <div id="step-details" class="step-content">
                                <div class="step-header">
                                    <h2>Customize Your Capabilities</h2>
                                    <p>Select the specific tools and features required for your custom GoHighLevel build</p>
                                    <div class="context-indicator">
                                        <span>üìç</span>
                                        <span>Step 3 of 5: Configuring Details</span>
                                    </div>
                                </div>
                                <div class="step-body" id="step-details-body">
                                    </div>
                                <div class="step-footer">
                                    <button id="details-back" class="btn btn-ghost">‚Üê Back to Scope</button>
                                    <button id="details-continue" class="btn btn-primary">Continue to Review ‚Üí</button>
                                </div>
                            </div>

                            <div id="step-review" class="step-content">
                                <div class="step-header">
                                    <h2>Review Your Strategic Investment</h2>
                                    <p>Transparent pricing compared against standard Western agency rates</p>
                                    <div class="context-indicator">
                                        <span>üìç</span>
                                        <span>Step 4 of 5: Reviewing Proposal</span>
                                    </div>
                                </div>
                                <div class="step-body" id="step-review-body">
                                    </div>
                                <div class="step-footer">
                                    <button id="review-back" class="btn btn-ghost">‚Üê Back to Details</button>
                                    <button id="review-continue" class="btn btn-primary">Finalize Request ‚Üí</button>
                                </div>
                            </div>

                            <div id="step-contact" class="step-content">
                                <div class="step-header">
                                    <h2>Secure Your Custom Estimate & Strategy</h2>
                                    <p>Complete the form to receive your detailed roadmap and implementation plan</p>
                                    <div class="context-indicator">
                                        <span>üìç</span>
                                        <span>Step 5 of 5: Execution Roadmap</span>
                                    </div>
                                </div>
                                <div class="step-body" id="step-contact-body">
                                    <div class="quote-grid">
                                        <div class="quote-form">
                                            
                                            <div class="roadmap-box">
                                                <div class="roadmap-title">Your Path to Launch</div>
                                                <div class="roadmap-steps-container">
                                                    <div class="roadmap-item">
                                                        <div class="roadmap-number">1</div>
                                                        <div class="roadmap-text">Submit Request<br><span>Instant</span></div>
                                                    </div>
                                                    <div class="roadmap-item">
                                                        <div class="roadmap-number">2</div>
                                                        <div class="roadmap-text">Strategy Review<br><span>Within 24 Hours</span></div>
                                                    </div>
                                                    <div class="roadmap-item">
                                                        <div class="roadmap-number">3</div>
                                                        <div class="roadmap-text">Kickoff Call<br><span>At Your Convenience</span></div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="help-banner">
                                                <span class="help-banner-icon">üîí</span>
                                                <div class="help-banner-content">
                                                    <p>Your business data is protected. We will review your selection and prepare your custom strategy.</p>
                                                </div>
                                            </div>

                                            <form id="quote-form">
                                                <div class="form-row">
                                                    <div class="form-group">
                                                        <input type="text" class="form-input" name="firstName" placeholder="First Name *" required>
                                                    </div>
                                                    <div class="form-group">
                                                        <input type="text" class="form-input" name="lastName" placeholder="Last Name">
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <input type="email" class="form-input" name="email" placeholder="Business Email Address *" required>
                                                </div>
                                                <div class="form-group">
                                                    <input type="text" class="form-input" name="company" placeholder="Company / Agency Name">
                                                </div>
                                                <div class="form-group">
                                                    <textarea class="form-input form-textarea" name="projectDescription" placeholder="Briefly describe your current bottlenecks or goals..." rows="3"></textarea>
                                                </div>
                                                
                                                <button type="button" class="video-option" id="video-option">
                                                    <div class="checkbox" id="video-checkbox">
                                                        <span class="checkbox-check">‚úì</span>
                                                    </div>
                                                    <div class="video-option-text">
                                                        <h4>Get a Personalized Video Strategy Walkthrough</h4>
                                                        <p>Our experts will record a Loom explaining your custom build-out plan</p>
                                                    </div>
                                                </button>

                                                <button type="submit" class="btn btn-primary" style="width: 100%; justify-content: center; padding: 1.25rem;">
                                                    Secure My Custom Estimate & Strategy
                                                </button>

                                                <div class="form-divider">
                                                    <button type="button" class="btn btn-outline" style="width: 100%; justify-content: center;">
                                                        üìÖ Book an Implementation Call
                                                    </button>
                                                    <p style="text-align: center; font-size: 0.8125rem; color: var(--text-muted); margin-top: 0.75rem;">
                                                        Prefer to talk now? Schedule a 15-min discovery session.
                                                    </p>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                                <div class="step-footer">
                                    <button id="contact-back" class="btn btn-ghost">‚Üê Back to Review</button>
                                    <button class="btn btn-outline-sm" onclick="location.reload()">Start New Estimate</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="estimator-sidebar">
                        <div class="summary-card">
                            <div class="summary-header">
                                <div class="summary-title">
                                    <div class="summary-icon">üíé</div>
                                    <div>
                                        <h3>Investmention Summary</h3>
                                        <p id="sidebar-status">Live Estimate</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="summary-content" id="summary-content">
                                <div style="text-align: center; padding: 2rem; color: var(--text-muted);">
                                    <div style="font-size: 2rem; margin-bottom: 0.5rem;">üìã</div>
                                    <p style="font-weight: 500; margin-bottom: 0.25rem;">No Services Selected</p>
                                    <p style="font-size: 0.875rem;">Select services to see your ROI-based investment</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    </div>
                </div>
        </div>
    </div>

    <script src="src/config.js"></script>
    <script src="src/state.js"></script>
    <script src="src/calculator.js"></script>
    <script src="src/ui.js"></script>
    <script src="src/ghl-integration.js"></script>
    <script src="src/main.js"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initializing system
            setTimeout(function() {
                if (window.serviceEstimator && window.serviceEstimator.updateSidebar) {
                    window.serviceEstimator.updateSidebar();
                }
            }, 100);
            
            document.addEventListener('click', function(e) {
                if (e.target.closest('.service-card') || e.target.closest('.config-option')) {
                    setTimeout(function() {
                        if (window.serviceEstimator && window.serviceEstimator.updateSidebar) {
                            window.serviceEstimator.updateSidebar();
                        }
                    }, 50);
                }
            });
        });

        // Communication with parent frame for auto-height
        (function () {
            function sendHeight() {
                const app = document.getElementById("estimator-app");
                if (!app) return;
                const height = app.offsetHeight;
                window.parent.postMessage({ type: "MT_ESTIMATOR_HEIGHT", height }, "*");
            }
            window.addEventListener("load", sendHeight);
            window.addEventListener("resize", sendHeight);
            const observer = new MutationObserver(() => sendHeight());
            observer.observe(document.body, { childList: true, subtree: true, attributes: true });
        })();
    </script>
</body>
</html>